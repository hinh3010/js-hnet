<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
        .hidden {
            display: none;
        }
    </style>
</head>

<body>
    <div style="
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        margin-top: 50px;
      ">
        <label for="adu1">Nhap</label>
        <input type="date" required id="adu1" style="width: 80vw; padding: 4px 20px" placeholder="Enter some text" />
    </div>
    <div style="
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: space-around;
        margin-top: 50px;
      ">
        <button class="btn" id="btn1" style="margin-top: 10px">Hom truoc</button>
        <button class="btn" id="btn2" style="margin-top: 10px">Hom sau</button>
    </div>
    <div style="
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        margin-top: 50px;
      ">
        <h2>Ket qua</h2>
        <h2 id="ketqua"></h2>
    </div>
</body>
<script>
    const $ = document.querySelector.bind(document);
    const $$ = document.querySelectorAll.bind(document);

    const btn = $$(".btn");

    const input1 = $("#adu1");
    const ketqua = $("#ketqua")

    const btnArr = Array.from(btn)

    const arrThang31 = [1, 3, 5, 7, 8, 10, 12]
    const arrThang30 = [4, 6, 9, 11]

    btnArr.forEach(b => {
        b.addEventListener("click", function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (!input1.value) {
                return alert("chua nhap")
            }
            let date = input1.value.split('-')
            let nam = Number(date[0])
            let thang = Number(date[1])
            let ngay = Number(date[2])

            let newNgay = ngay
            let newThang = thang
            let newNam = nam

            if (ngay === 31) {
                if (thang !== 12) {
                    if (this.id === "btn2") newNgay = 1
                    if (this.id === "btn1") newNgay = ngay - 1
                } else {
                    console.log("thang 12", newNam = nam + 1)
                    if (this.id === "btn2") { newNgay = 1; newThang = 1; newNam = nam + 1 }
                    if (this.id === "btn1") newNgay = ngay - 1
                }
            }
            else if (ngay === 30) {
                if (arrThang31.includes(thang)) {
                    if (this.id === "btn2") newNgay = ngay + 1
                    if (this.id === "btn1") newNgay = ngay - 1
                } else {
                    if (this.id === "btn2") newNgay = 1
                    if (this.id === "btn1") newNgay = ngay - 1
                }
            }
            else if (ngay === 1) {
                if (thang === 1) {
                    if (this.id === "btn1") { newNgay = 31; newThang = 12; newNam = nam - 1 }
                    if (this.id === "btn2") newNgay = ngay + 1
                } else if (arrThang31.includes(thang - 1)) {
                    if (this.id === "btn1") { newNgay = 31; newThang = thang - 1 }
                    if (this.id === "btn2") newNgay = ngay + 1
                }
                else if (arrThang30.includes(thang - 1)) {
                    if (this.id === "btn1") { newNgay = 30; newThang = thang - 1 }
                    if (this.id === "btn2") newNgay = ngay + 1
                } else {
                    if (nam % 4 === 0) {
                        if (this.id === "btn1") { newNgay = 29; newThang = thang - 1 }
                        if (this.id === "btn2") newNgay = ngay + 1
                    } else {
                        if (this.id === "btn1") { newNgay = 28; newThang = thang - 1 }
                        if (this.id === "btn2") newNgay = ngay + 1
                    }
                }
            }


            return ketqua.textContent = `ngay ${newNgay} thang ${newThang} nam ${newNam} `

        });
    })

</script>

</html>